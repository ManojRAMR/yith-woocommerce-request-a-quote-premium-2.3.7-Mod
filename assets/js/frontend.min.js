jQuery(document).ready((function($){"use strict";var $body=$("body"),$add_to_cart_el=$(".add-request-quote-button"),$widget=$(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"),ajax_loader="undefined"!=typeof ywraq_frontend&&ywraq_frontend.block_loader,allow_out_of_stock="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_out_of_stock,allow_only_out_of_stock="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_only_on_out_of_stock,$remove_item=$(".yith-ywraq-item-remove"),$shipping_form=$(".shipping_address"),$billing_form=$(".woocommerce-billing-fields"),url=document.location.href,table=$(document).find("#yith-ywrq-table-list"),blockParams={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0};function refreshListTable(){$.post(url,(function(data){if(""!=data){var c,table=$("<div></div>").html(data).find("#yith-ywrq-table-list");$("#yith-ywrq-table-list").html(table.html()),$(document).trigger("ywraq_table_reloaded")}}))}allow_out_of_stock="yes"==allow_out_of_stock,allow_only_out_of_stock="yes"==allow_only_out_of_stock,table.length>0&&ywraq_frontend.raq_table_refresh_check&&refreshListTable(),$(document).on("ywraq_table_reloaded, yith_wwraq_removed_successfully, yith_check_table",(function(){var table;0==$(document).find("#yith-ywrq-table-list").length&&$(document).find(".yith-ywraq-before-table .wc-backward").hide()})),$(document).trigger("yith_check_table"),$.fn.yith_ywraq_variations=function(){var form=$(document).find("form.variations_form");if(form.length&&void 0!==form.data("product_id")){var product_id=form.data("product_id").toString().replace(/[^0-9]/g,""),buttonWrap=$(".add-to-quote-"+product_id).find(".yith-ywraq-add-button"),button=buttonWrap.find("a.add-request-quote-button"),add_response=$(".yith_ywraq_add_item_product-response-"+product_id),raq_message=$(".yith_ywraq_add_item_response-"+product_id),browse_list=$(".yith_ywraq_add_item_browse-list-"+product_id),initMe=function(){button.show().addClass("disabled"),buttonWrap.show().removeClass("hide").removeClass("addedd"),add_response.hide().removeClass("show"),raq_message.hide().removeClass("show"),browse_list.hide().removeClass("show"),(allow_only_out_of_stock&&allow_out_of_stock||allow_only_out_of_stock)&&button.hide()};form.on("found_variation",(function(ev,variation){var variationData=""+$(".add-to-quote-"+product_id).attr("data-variation"),show_button=!0;add_response.hide().removeClass("show"),allow_out_of_stock?allow_only_out_of_stock&&variation.is_in_stock&&(show_button=!1):variation.is_in_stock||(show_button=!1),show_button?(button.show().removeClass("disabled"),buttonWrap.show().removeClass("hide").removeClass("addedd"),raq_message.hide().removeClass("show"),browse_list.hide().removeClass("show")):(button.hide().addClass("disabled"),buttonWrap.hide().removeClass("show").removeClass("addedd"),raq_message.hide().removeClass("show"),browse_list.hide().removeClass("show")),-1!==variationData.indexOf(""+variation.variation_id)&&show_button?(button.hide(),raq_message.show().removeClass("hide"),browse_list.show().removeClass("hide")):show_button&&(button.show().removeClass("disabled"),buttonWrap.show().removeClass("hide").removeClass("addedd"),raq_message.hide().removeClass("show"),browse_list.hide().removeClass("show"))})),form.on("reset_data",(function(ev){initMe()})),initMe()}},$(".variations_form").each((function(){$(this).yith_ywraq_variations()})),$(document).on("qv_loader_stop",(function(ev){$(".variations_form").each((function(){$(this).yith_ywraq_variations()}))})),$.fn.yith_ywraq_refresh_button=function(){var $product_id,product_id=$('[name|="product_id"]').val(),button,$button_wrap=$(".add-to-quote-"+product_id).find("a.add-request-quote-button").parents(".yith-ywraq-add-to-quote"),$variation_id;if(!$('[name|="variation_id"]').length)return!1},$.fn.yith_ywraq_refresh_button();var xhr=!1;$(document).on("click",".add-request-quote-button",(function(e){e.preventDefault();var $t=$(this),$t_wrap=$t.closest(".yith-ywraq-add-to-quote"),add_to_cart_info="ac",$cart_form="";if($t.hasClass("outofstock")?window.alert(ywraq_frontend.i18n_out_of_stock):$t.hasClass("disabled")&&window.alert(ywraq_frontend.i18n_choose_a_variation),!($t.hasClass("disabled")||$t.hasClass("outofstock")||xhr)){if($(".grouped_form").length){var qtys=0;if($(".grouped_form input.qty").each((function(){qtys=Math.floor($(this).val())+qtys})),0==qtys)return void alert(ywraq_frontend.select_quantity)}if(void 0===($cart_form=$t.closest(".cart").length?$t.closest(".cart"):$t_wrap.siblings(".cart").first().length?$t_wrap.siblings(".cart").first():$(".composite_form").length?$(".composite_form"):$t.closest("ul.products").length>0?$t.closest("ul.products"):$(".cart:not(.in_loop)"))[0]||"function"!=typeof $cart_form[0].checkValidity||$cart_form[0].checkValidity()){if($t.closest("ul.products").length>0)var $add_to_cart_el="",$product_id_el,$product_id_el_val=($product_id_el=$t.closest("li.product").find("a.add_to_cart_button")).data("product_id");else var $add_to_cart_el=$t.closest(".product").find('input[name="add-to-cart"]'),$product_id_el=$t.closest(".product").find('input[name="product_id"]'),$product_id_el_val=$t.data("product_id")||($product_id_el.length?$product_id_el.val():$add_to_cart_el.val());var prod_id=void 0===$product_id_el_val?$t.data("product_id"):$product_id_el_val,quantity,quantity;if((add_to_cart_info=$cart_form.serializefiles()).append("context","frontend"),add_to_cart_info.append("action","yith_ywraq_action"),add_to_cart_info.append("ywraq_action","add_item"),add_to_cart_info.append("product_id",$t.data("product_id")),add_to_cart_info.append("wp_nonce",$t.data("wp_nonce")),add_to_cart_info.append("yith-add-to-cart",$t.data("product_id")),(quantity=$t_wrap.find("input.qty").val())>0&&add_to_cart_info.append("quantity",quantity),$(".wc-product-table-wrapper").length>0)(quantity=$t.parents(".product-row").find(".cart input.qty").val())>0&&add_to_cart_info.append("quantity",quantity);if($t.closest(".yith_wc_qof_button_and_price").length>0){var qof_wrap,qof_quantity=$t.closest(".yith_wc_qof_button_and_price").find(".YITH_WC_QOF_Quantity_Cart").val();add_to_cart_info.append("quantity",qof_quantity)}var wcclForm=$t.closest("li.product").find(".variations_form.in_loop"),varID_wccl=!!wcclForm.length&&wcclForm.data("active_variation");return varID_wccl&&(add_to_cart_info.append("variation_id",varID_wccl),wcclForm.find("select").each((function(){add_to_cart_info.append(this.name,this.value)}))),$(document).trigger("yith_ywraq_action_before"),!("undefined"!=typeof yith_wapo_general&&!yith_wapo_general.do_submit)&&(!("undefined"!=typeof ywcnp_raq&&!ywcnp_raq.do_submit)&&void(xhr=$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:add_to_cart_info,contentType:!1,processData:!1,beforeSend:function(){$t.after(' <img src="'+ajax_loader+'" class="ywraq-loader" >')},complete:function(){fancyProductDesigner.toggleSpinner(!1),jQuery(".single_add_to_cart_button").removeClass("fpd-disabled"),jQuery(".add-request-quote-button").removeClass("fpd-disabled"),$t.next().remove()},success:function(response){"true"==response.result||"exists"==response.result?("yes"==ywraq_frontend.go_to_the_list?window.location.href=response.rqa_url:($(".yith_ywraq_add_item_response-"+prod_id).hide().addClass("hide").html(""),$(".yith_ywraq_add_item_product-response-"+prod_id).show().removeClass("hide").html(response.message),$(".yith_ywraq_add_item_browse-list-"+prod_id).show().removeClass("hide"),$t.parent().hide().removeClass("show").addClass("addedd"),$(".add-to-quote-"+prod_id).attr("data-variation",response.variations),$widget.length&&($widget.ywraq_refresh_widget(),$widget=$(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),ywraq_refresh_number_items()),$(document).trigger("yith_wwraq_added_successfully",[response])):"false"==response.result&&($(".yith_ywraq_add_item_response-"+prod_id).show().removeClass("hide").html(response.message),$(document).trigger("yith_wwraq_error_while_adding")),xhr=!1}})))}$('<input type="submit">').hide().appendTo($cart_form).click().remove()}})),$.fn.serializefiles=function(){var obj=$(this),formData=new FormData;$.each($(obj).find("input[type='file']"),(function(i,tag){$.each($(tag)[0].files,(function(i,file){formData.append(tag.name,file)}))}));var params=$(obj).serializeArray(),quantity_in=!1;return $.each(params,(function(i,val){("quantity"==val.name||val.name.indexOf("quantity"))&&(quantity_in=!0),"add-to-cart"!=val.name&&formData.append(val.name,encodeURIComponent(val.value))})),!1===quantity_in&&formData.append("quantity",1),formData},$.fn.ywraq_refresh_widget=function(){$widget.each((function(){var $t=$(this),$wrapper_list=$t.find(".yith-ywraq-list-wrapper"),$list=$t.find(".yith-ywraq-list"),data_widget=$t.find(".yith-ywraq-list-widget-wrapper").data("instance");$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:data_widget+"&ywraq_action=refresh_quote_list&action=yith_ywraq_action&context=frontend",beforeSend:function(){$list.css("opacity",.5),$t.hasClass("widget_ywraq_list_quote")&&$wrapper_list.prepend(' <img src="'+ajax_loader+'" class="ywraq-loader">')},complete:function(){$t.hasClass("widget_ywraq_list_quote")&&$wrapper_list.next().remove(),$list.css("opacity",1)},success:function(response){$t.hasClass("widget_ywraq_mini_list_quote")?$t.find(".yith-ywraq-list-widget-wrapper").html(response.mini):$t.find(".yith-ywraq-list-widget-wrapper").html(response.large),$(document).trigger("yith_ywraq_widget_refreshed")}})}))},$(document).on("click",".yith-ywraq-item-remove",(function(e){e.preventDefault();var $t=$(this),key=$t.data("remove-item"),wrapper=$t.parents(".ywraq-wrapper"),form=$("#yith-ywraq-form"),cf7=wrapper.find(".wpcf7-form"),gravity_forms=wrapper.find(".gform_wrapper"),remove_info="",product_id=$t.data("product_id");remove_info="context=frontend&action=yith_ywraq_action&ywraq_action=remove_item&key="+$t.data("remove-item")+"&wp_nonce="+$t.data("wp_nonce")+"&product_id="+product_id,$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:remove_info,beforeSend:function(){$t.find(".ajax-loading").css("visibility","visible")},complete:function(){$t.siblings(".ajax-loading").css("visibility","hidden")},success:function(response){if(1===response){var $row_to_remove=$("[data-remove-item='"+key+"']").parents(".cart_item");if($row_to_remove.hasClass("composite-parent")){var composite_id=$row_to_remove.data("composite-id");$("[data-composite-id='"+composite_id+"']").remove()}if($row_to_remove.hasClass("yith-wapo-parent")){var wapo_id=$row_to_remove.find(".product-remove a").data("remove-item");$("[data-wapo_parent_key='"+wapo_id+"']").remove()}if($row_to_remove.hasClass("ywcp_component_item")&&$("tr.ywcp_component_child_item").filter("[data-wcpkey='"+key+"']").remove(),$row_to_remove.hasClass("bundle-parent")){var bundle_key=$row_to_remove.data("bundle-key");$("[data-bundle-key='"+bundle_key+"']").remove()}$row_to_remove.remove(),0===$(".cart_item").length&&(cf7.length&&cf7.remove(),gravity_forms.length&&gravity_forms.remove(),$("#yith-ywraq-form, .yith-ywraq-mail-form-wrapper").remove(),$("#yith-ywraq-message").html(ywraq_frontend.no_product_in_list)),$widget.length&&($widget.ywraq_refresh_widget(),$widget=$(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),ywraq_refresh_number_items(),$(document).find('.hide-when-removed[data-product_id="'+product_id+'"]').hide(),$(document).find('.yith-ywraq-add-button[data-product_id="'+product_id+'"]').show(),$(document).trigger("yith_wwraq_removed_successfully")}else $(document).trigger("yith_wwraq_error_while_removing")}})})),$(".ywraq_clean_list").on("click",(function(e){e.preventDefault();var $t=$(this);$t.block(blockParams);var request=$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:"ywraq_action=clean_quote",success:function(data){var c,wrapper=$("<div></div>").html(data.response).find(".ywraq-wrapper");$(".ywraq-wrapper").html(wrapper.html()),$widget.ywraq_refresh_widget(),ywraq_refresh_number_items(),$t.unblock()}})}));var content_data="",$cform7;function ywraq_refresh_number_items(){var $number_items;$(document).find(".ywraq_number_items").each((function(){var $t=$(this),show_url=$t.data("show_url"),item_name=$t.data("item_name"),item_plural_name=$t.data("item_plural_name");$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:"ywraq_action=refresh_number_items&action=yith_ywraq_action&context=frontend&item_name="+item_name+"&item_plural_name="+item_plural_name+"&show_url="+show_url,success:function(response){$t.replaceWith(response),$(document).trigger("ywraq_number_items_refreshed")}})}))}function trigger_checkout_quote_click(){$(document).on("click","#ywraq_checkout_quote",(function(e){$(document).find('input[name="payment_method"]').val("yith-request-a-quote"),$("#ywraq_checkout_quote").val(!0)}))}function initAjaxLoad(){var fragments=getYwraqFragments();fragments&&updateYwraqFragments(fragments)}function getYwraqFragments(){var objects=$(document).find(".yith-ywraq-add-to-quote"),fragments=[];return 0!==objects.length&&($.each(objects,(function(){var $t,is_variable=$(this).closest(".variations_form "),id=$(this).find(".yith-ywraq-add-button").data("product_id");void 0===is_variable&&fragments.push(id)})),fragments)}function updateYwraqFragments(fragments){var data={fragments:fragments,ywraq_action:"update_ywraq_fragments",action:"yith_ywraq_action",context:"frontend"};$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:data,success:function(response){void 0!==response.error?console.log(response.error):!0===response.success&&refreshYwraqFragments(response.fragments)}})}function refreshYwraqFragments(fragments){var objects=$(document).find(".yith-ywraq-add-to-quote");objects.length>0&&$.each(objects,(function(){var $t=$(this),variation=$t.data("variation"),id=$t.find(".yith-ywraq-add-button").data("product_id");void 0===variation&&void 0!==fragments[id]&&$t.replaceWith(fragments[id])}))}$(".wpcf7-submit").closest(".wpcf7").length>0&&$(document).find(".ywraq-wrapper .wpcf7").each((function(){var $cform7=$(this),idform;$cform7.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id&&($cform7.on("wpcf7:mailsent",(function(){$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",current_user_id:ywraq_frontend.current_user_id,context:"frontend",ywraq_order_action:"mail_sent_order_created"},success:function(response){""!=response.rqa_url&&(window.location.href=response.rqa_url)}})})),document.addEventListener("wpcf7mailsent",(function(event){window.location.href=ywraq_frontend.rqa_url}),!1))})),$("#yith-ywrq-table-list").on("change",".qty",(function(){var qty;$(this).val()<=0&&$(this).val(1)})),$(document).bind("gform_confirmation_loaded",(function(event,formId){ywraq_frontend.gf_id==formId&&(window.location.href=ywraq_frontend.rqa_url)})),ywraq_frontend.auto_update_cart_on_quantity_change&&$(document).on("click, change","#yith-ywrq-table-list .product-quantity input",(function(e){var $t=$(this),name=$t.attr("name"),container=$t.closest(".quantity");if(container.block(blockParams),void 0===name){var $input_quantity=$t.closest(".product-quantity").find(".input-text.qty"),name=$input_quantity.attr("name"),value=$input_quantity.val(),item_keys=name.match(/[^[\]]+(?=])/g);$t.hasClass("plus")&&value++,$t.hasClass("minus")&&value--;var request_info="context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+value+"&key="+item_keys[0]}else var value,item_keys,request_info="context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+(value=$t.val())+"&key="+(item_keys=name.match(/[^[\]]+(?=])/g))[0];var request=$.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:request_info,success:function(response){$.post(url,(function(data){if(""!=data){var c,table=$("<div></div>").html(data).find("#yith-ywrq-table-list");$("#yith-ywrq-table-list").html(table.html()),$(document).trigger("ywraq_table_reloaded"),$widget.length&&($widget.ywraq_refresh_widget(),$widget=$(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"))}container.unblock()}))}})})),$shipping_form.length>0&&1==ywraq_frontend.lock_shipping&&($shipping_form.find("input").attr("readonly","readonly"),$shipping_form.find("select").attr("readonly","readonly"),$(".woocommerce-checkout #shipping_country_field").css("pointer-events","none"),$(".woocommerce-checkout #shipping_state_field").css("pointer-events","none")),$billing_form.length>0&&1==ywraq_frontend.lock_billing&&($billing_form.find("input").attr("readonly","readonly"),$billing_form.find("select").attr("readonly","readonly"),$(".woocommerce-checkout #billing_country_field").css("pointer-events","none"),$(".woocommerce-checkout #billing_state_field").css("pointer-events","none")),$widget.ywraq_refresh_widget(),ywraq_refresh_number_items(),trigger_checkout_quote_click(),$(document).find(".theme-yith-proteo .ywraq-wrapper .woocommerce-message").removeAttr("role"),1==ywraq_frontend.enable_ajax_loading&&initAjaxLoad()}));